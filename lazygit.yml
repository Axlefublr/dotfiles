# yaml-language-server: $schema=https://raw.githubusercontent.com/jesseduffield/lazygit/master/schema/config.json
quitOnTopLevelReturn: false
disableStartupPopups: true
promptToReturnFromSubprocess: true
notARepository: quit
gui:
  # [[sort on]]
  # sidePanelWidth: 0.4
  border: single
  commitAuthorLongLength: 9
  commitAuthorShortLength: 2
  commitHashLength: 4
  enlargedSideViewLocation: top
  expandFocusedSidePanel: false
  mouseEvents: false
  nerdFontsVersion: "3"
  scrollHeight: 10
  scrollOffMargin: 99
  scrollPastBottom: false
  shortTimeFormat: "15:04"
  showBottomLine: false
  showBranchCommitHash: false
  showDivergenceFromBaseBranch: arrowAndNumber
  showFileTree: false
  showNumstatInFilesView: false
  showPanelJumps: false
  showRootItemInFileTree: false
  skipAmendWarning: true
  skipDiscardChangeWarning: true
  skipNoStagedFilesWarning: true
  skipRewordInEditorWarning: true
  skipStashWarning: true
  statusPanelView: allBranchesLog
  tabWidth: 3
  timeFormat: "06.01.02"
  useHunkModeInStagingView: true
  wrapLinesInStagingView: true
  # [[sort off]]
  authorColors:
    Axlefublr: "#e491b2"
  branchColorPatterns:
    "^main$": "#b58cc6"
    "^master$": "#b58cc6"
    "^dev$": "#b58cc6"
    "^Axlefublr/": "#e491b2"
    "^sd$": "#ea6962"
  theme:
    activeBorderColor:
      - yellow
      - bold
    searchingActiveBorderColor:
      - "#b58cc6"
      - bold
    optionsTextColor:
      - "#78bf84"
    selectedLineBgColor:
      - "#5f472d"
    cherryPickedCommitFgColor:
      - "#b58cc6"
    cherryPickedCommitBgColor:
      - "#"
git:
  autoFetch: true
  diffContextSize: 1
  pagers:
    - pager: diff-so-fancy
  merging:
    manualCommit: true
    squashMergeMessage: Squash merge {{selectedRef}} into {{currentBranch}}
  log:
    showGraph: never
    showWholeGraph: false
  truncateCopiedCommitHashesTo: 12
  branchLogCmd: "git log --graph --color=always --abbrev-commit --decorate --date=relative --pretty=medium --oneline {{branchName}} --"
update:
  method: never
os:
  editPreset: helix
keybinding:
  universal:
    quit: "<insert>"
    quit-alt1: <disabled>
    return: <esc>
    quitWithoutChangingDirectory: <disabled>
    togglePanel: <tab>
    prevItem: <up>
    nextItem: <down>
    prevItem-alt: k
    nextItem-alt: j
    prevPage: ","
    nextPage: .
    scrollLeft: h
    scrollRight: l
    gotoTop: <home>
    gotoBottom: <end>
    gotoTop-alt: <disabled>
    gotoBottom-alt: <disabled>
    toggleRangeSelect: <disabled>
    rangeSelectDown: <s-down>
    rangeSelectUp: <s-up>
    prevBlock: K
    nextBlock: J
    prevBlock-alt: <disabled>
    nextBlock-alt: <disabled>
    nextBlock-alt2: <disabled>
    prevBlock-alt2: <disabled>
    jumpToBlock:
      - "4"
      - "1"
      - "3"
      - "2"
      - "5"
    focusMainView: "0"
    nextMatch: "n"
    prevMatch: "N"
    startSearch: /
    optionMenu: <f1>
    optionMenu-alt1: <disabled>
    select: w
    goInto: <enter>
    confirm: <enter>
    confirmInEditor: <a-enter>
    confirmInEditor-alt: <disabled>
    remove: d
    new: "n"
    edit: e
    openFile: <disabled>
    scrollUpMain: <pgup>
    scrollDownMain: <pgdown>
    scrollUpMain-alt1: <disabled>
    scrollDownMain-alt1: <disabled>
    scrollUpMain-alt2: <disabled>
    scrollDownMain-alt2: <disabled>
    executeShellCommand: <disabled>
    createRebaseOptionsMenu: m
    pushFiles: o
    pullFiles: O
    refresh: <disabled>
    createPatchOptionsMenu: u
    nextTab: L
    prevTab: H
    nextScreenMode: +
    prevScreenMode: "-"
    undo: <c-t>
    redo: <c-r>
    filteringMenu: <disabled>
    diffingMenu: <disabled>
    diffingMenu-alt: <disabled>
    copyToClipboard: <c-s>
    openRecentRepos: <disabled>
    submitEditorText: <enter>
    extrasMenu: "@"
    toggleWhitespaceInDiffView: <disabled>
    increaseContextInDiffView: "}"
    decreaseContextInDiffView: "{"
    increaseRenameSimilarityThreshold: )
    decreaseRenameSimilarityThreshold: (
    openDiffTool: <disabled>
  status:
    checkForUpdate: <disabled>
    recentRepos: <enter>
    allBranchesLogGraph: <disabled>
  files:
    commitChanges: c
    commitChangesWithoutHook: <disabled>
    amendLastCommit: a
    commitChangesWithEditor: C
    findBaseCommitForFixup: f
    confirmDiscard: i
    ignoreFile: i
    refreshFiles: r
    stashAllChanges: <disabled>
    viewStashOptions: s
    toggleStagedAll: W
    viewResetOptions: x
    fetch: <disabled>
    toggleTreeView: "`"
    # openMergeTool: M
    openStatusFilter: "'"
    copyFileInfoToClipboard: ";"
    collapseAll: _
    expandAll: "^"
  branches:
    createPullRequest: <disabled>
    viewPullRequestOptions: <disabled>
    copyPullRequestURL: <disabled>
    checkoutBranchByName: f
    forceCheckoutBranch: W
    checkoutPreviousBranch: "&"
    rebaseBranch: r
    renameBranch: R
    mergeIntoCurrentBranch: m
    moveCommitsToNewBranch: "N"
    viewGitFlowOptions: <disabled>
    fastForward: <disabled>
    createTag: t
    pushTag: o
    setUpstream: u
    fetchRemote: ":"
    sortOrder: "'"
  worktrees:
    viewWorktreeOptions: w
  commits:
    squashDown: s
    renameCommit: r
    renameCommitWithEditor: R
    viewResetOptions: v
    markCommitAsFixup: S
    createFixupCommit: f
    squashAboveCommits: g
    moveDownCommit: <c-j>
    moveUpCommit: <c-k>
    amendToCommit: a
    resetCommitAuthor: A
    pickCommit: p
    revertCommit: <disabled>
    cherryPickCopy: <c-c>
    pasteCommits: <c-v>
    markCommitAsBaseForRebase: M
    tagCommit: t
    checkoutCommit: w
    resetCherryPick: <c-x>
    copyCommitAttributeToClipboard: ";"
    openLogMenu: <c-l>
    openInBrowser: <disabled>
    viewBisectOptions: b
    startInteractiveRebase: i
    selectCommitsOfCurrentBranch: "*"
  amendAttribute:
    resetAuthor: a
    setAuthor: A
    addCoAuthor: c
  stash:
    popStash: s
    renameStash: r
  commitFiles:
    checkoutCommitFile: <space>
  main:
    toggleSelectHunk: a
    pickBothHunks: o
    editSelectHunk: E
  submodules:
    init: i
    update: u
    bulkMenu: b
  commitMessage:
    commitMenu: <c-o>
customCommands:
  - key: <F3>
    context: global
    command: "footclient -NT floating"
    description: "Open floating terminal here"
    output: none
  - key: <F2>
    context: global
    command: "footclient -N"
    description: "Open terminal here"
    output: none
  - key: U
    context: global
    command: "wl-paste | git apply --3way"
    description: "Apply patch from clipboard"
    output: none
  - key: <c-u>
    context: global
    command: "create-patch-file.fish {{.Form.Filename}}"
    description: "Write clipboard into a patch file"
    output: none
    prompts:
      - type: input
        title: "Enter patch filename"
        key: Filename
        suggestions:
          command: "list-patch-files.fish"

  - key: E
    context: files
    command: "fish -c 'git show HEAD:{{.SelectedPath}} >/tmp/mine/lazygit(path extension {{.SelectedPath}}) ; helix /tmp/mine/lazygit(path extension {{.SelectedPath}})'"
    description: "Edit file at HEAD"
    output: terminal
  - key: "<c-a>"
    context: files
    command: "autocommit.fish"
    description: "Autocommit"
    output: log
  - key: "<delete>"
    context: files
    command: "gomi {{.SelectedPath}}"
    description: "Delete file"
    output: none

  - key: "e"
    context: "commitFiles"
    command: 'fish -c ''git show "{{.SelectedCommit.Hash}}:{{.SelectedPath}}" >/tmp/mine/lazygit(path extension {{.SelectedPath}}) ; helix /tmp/mine/lazygit(path extension {{.SelectedPath}})'''
    description: "Edit file at this point in history"
    output: terminal
  - key: "E"
    context: "commitFiles"
    command: 'fish -c ''git show "{{.SelectedCommit.Hash}}^:{{.SelectedPath}}" >/tmp/mine/lazygit(path extension {{.SelectedPath}}) ; helix /tmp/mine/lazygit(path extension {{.SelectedPath}})'''
    description: "Edit file at the commit before this point in history"
    output: terminal
  - key: "q"
    context: "commitFiles"
    command: "fish -c 'ghl -c blob -pb {{.SelectedCommit.Hash}} {{.SelectedPath}} >~/.local/share/flipboard'"
    description: "Copy link to file at this commit"
  - key: "Q"
    context: "commitFiles"
    command: "fish -c 'ghl -c blob -pb {{.SelectedCommit.Hash}}^ {{.SelectedPath}} >~/.local/share/flipboard'"
    description: "Copy link to file at *previous* commit"

  - key: "o"
    context: "commits"
    command: "git push -f {{.SelectedRemote.Name}} {{.SelectedCommit.Sha}}:{{.SelectedLocalBranch.Name}}"
    loadingText: "Pushing commit"
    description: "Push a specific commit (and any preceding)"
    output: log
  - key: "O"
    context: "commits"
    command: "git fetch origin upstream --unshallow"
    loadingText: "Unshallowing"
    description: "Unshallow the shallow copy"
    output: log
  - key: "G"
    context: "commits"
    command: "git rebase --autosquash $(git merge-base HEAD upstream/HEAD)"
    loadingText: Rebasing
    description: "Apply fixup commits up within the divergence"
    output: none
  - key: "I"
    context: "commits"
    command: "git rebase -i $(git merge-base HEAD upstream/HEAD)"
    description: "Rebase on the oldest your commit"
    output: terminal
  - key: "<c-e>"
    context: "commits"
    command: "git rebase -i {{.SelectedCommit.Sha}}"
    description: "Rebase in editor"
    output: terminal
  - key: "x"
    context: "commits"
    command: "git {{index .PromptResponses 0}} {{.SelectedCommit.Sha}}"
    prompts:
      - type: "menu"
        title: "How to revert?"
        options:
          - value: "revert"
            name: "With a commit"
            key: "c"
          - value: "revert -n"
            name: "Into index"
            key: "i"
    description: "View reverting options..."

  - key: E
    context: "commits, subCommits"
    command: "fish -c 'git diff {{.SelectedCommit.Sha}}^..{{.SelectedCommit.Sha}} >/tmp/mine/lazygit-commit.diff ; helix /tmp/mine/lazygit-commit.diff'"
    description: "Edit commit diff in editor"
    output: terminal
  - key: q
    context: "commits, subCommits"
    command: "fish -c 'ghl -pb {{.SelectedCommit.Sha}} >~/.local/share/flipboard'"
    description: "Copy link to repo at this point in history"

  - key: q
    context: "tags"
    command: "fish -c 'ghl -b {{.SelectedTag.Name}} >~/.local/share/flipboard'"
    description: "Copy link to repo at this tag"
  - key: Q
    context: "tags"
    command: "fish -c 'ghl -pb {{.SelectedTag.Name}} >~/.local/share/flipboard'"
    description: "Copy link to repo at this tag, parsing it into commit"

  - key: "s"
    context: localBranches
    command: "gh pr create"
    description: "Create pull request"
    output: terminal
  - key: "S"
    context: "localBranches"
    command: "gh pr checkout {{index .PromptResponses 0}}"
    prompts:
      - type: "input"
        title: "PR id:"
    loadingText: "Checking out PR"
    description: "Checkout PR"
  - key: "U"
    context: localBranches
    command: |
      fish -c 'git symbolic-ref --short refs/remotes/origin/HEAD | string replace "origin/" "" | read -l branch
      and begin
        git branch -f $branch dev
        git push -f origin dev $branch
      end'
    loadingText: "Syncing"
    description: "Sync main branch with dev"
  - key: "<c-r>"
    context: localBranches
    command: |
      fish -c 'git fetch upstream
      and git symbolic-ref --short refs/remotes/upstream/HEAD | read -l branch
      and git rebase $branch ; true'
    loadingText: "Rebasing"
    description: "Rebase onto the default upstream branch"
    output: log
  - key: "q"
    context: localBranches
    command: "fish -c 'ghl -b {{.SelectedLocalBranch.Name}} >~/.local/share/flipboard'"
    description: "Copy link to repo in this branch"
  - key: "Q"
    context: localBranches
    command: "fish -c 'ghl -pb {{.SelectedLocalBranch.Name}} >~/.local/share/flipboard'"
    description: "Copy link to repo in this branch, parsing into commit hash"
  - key: "o"
    context: localBranches
    command: "git push -f origin {{.SelectedLocalBranch.Name}}"
    loadingText: "Pushing"
    description: "Push selected branch"
  - key: "g"
    context: localBranches
    command: "git branch eph-(date +%y.%m.%d-%H.%M.%S)"
    description: "Create temporary branch"
  - key: "G"
    context: localBranches
    command: |
      fish -c '
        for branch in (git branch -l eph\* | string trim)
          git branch -D $branch
        end
      '
    description: "Delete temporary branches"
