[mgr]

keymap = [
  # [[sort on]]
  # { on = ';', run = 'shell --interactive', desc = 'Run a shell command' },
  # { on = 'w', run = 'tasks_show', desc = 'Show task manager' },
  # { on = [ ',', 'A' ], run = 'sort alphabetical --reverse', desc = 'Sort alphabetically (reverse)' },
  # { on = [ ',', 'C' ], run = 'sort btime --reverse', desc = 'Sort by created time (reverse)' },
  # { on = [ ',', 'E' ], run = 'sort extension --reverse', desc = 'Sort by extension (reverse)' },
  # { on = [ ',', 'M' ], run = 'sort mtime --reverse', desc = 'Sort by modified time (reverse)' },
  # { on = [ ',', 'N' ], run = 'sort natural --reverse', desc = 'Sort naturally (reverse)' },
  # { on = [ ',', 'S' ], run = [ 'sort size --reverse', 'linemode size' ], desc = 'Sort by size (reverse)' },
  # { on = [ ',', 'a' ], run = 'sort alphabetical --reverse=no', desc = 'Sort alphabetically' },
  # { on = [ ',', 'c' ], run = 'sort btime --reverse=no', desc = 'Sort by created time' },
  # { on = [ ',', 'e' ], run = 'sort extension --reverse=no', desc = 'Sort by extension' },
  # { on = [ ',', 'm' ], run = 'sort mtime --reverse=no', desc = 'Sort by modified time' },
  # { on = [ ',', 'n' ], run = 'sort natural --reverse=no', desc = 'Sort naturally' },
  # { on = [ ',', 'r' ], run = 'sort random --reverse=no', desc = 'Sort randomly' },
  # { on = [ ',', 's' ], run = [ 'sort size --reverse=no', 'linemode size' ], desc = 'Sort by size' },
  # { on = [ 'm', 'c' ], run = 'linemode ctime', desc = 'Set linemode to ctime' },
  # { on = [ 'm', 'm' ], run = 'linemode none', desc = 'Set linemode to none' },
  # { on = [ 'm', 'o' ], run = 'linemode mtime', desc = 'Set linemode to mtime' },
  # { on = [ 'm', 's' ], run = 'linemode size', desc = 'Set linemode to size' },
  { on = '!', run = 'unyank', desc = 'Cancel the yank status' },
  { on = '%', run = 'toggle_all --state=true', desc = 'Select all' },
  { on = '+', run = 'hardlink --force --follow', desc = 'Hardlink' },
  { on = ',', run = 'escape --select', desc = 'Deselect all files' },
  { on = '-', run = 'link --force', desc = 'Symlink' },
  { on = '.', run = 'hidden toggle', desc = 'Toggle the visibility of hidden files' },
  { on = '/', run = 'find --smart', desc = 'Find next file' },
  { on = '1', run = 'tab_switch 0', desc = 'Switch to the first tab' },
  { on = '2', run = 'tab_switch 1', desc = 'Switch to the second tab' },
  { on = '3', run = 'tab_switch 2', desc = 'Switch to the third tab' },
  { on = '4', run = 'tab_switch 3', desc = 'Switch to the fourth tab' },
  { on = '5', run = 'tab_switch 4', desc = 'Switch to the fifth tab' },
  { on = '6', run = 'tab_switch 5', desc = 'Switch to the sixth tab' },
  { on = '7', run = 'tab_switch 6', desc = 'Switch to the seventh tab' },
  { on = '8', run = 'tab_switch 7', desc = 'Switch to the eighth tab' },
  { on = '9', run = 'tab_switch 8', desc = 'Switch to the ninth tab' },
  { on = ':', run = 'quit', desc = 'Exit the process' },
  { on = ';', run = [ 'plugin blammo', 'plugin intellishell' ], desc = 'Run a shell command' },
  { on = '<', run = 'tab_switch -1 --relative', desc = 'Switch to the previous tab' },
  { on = '<C-c>', run = 'yank', desc = 'Yank selected files (copy)' },
  { on = '<C-i>', run = 'plugin zoxide', desc = 'Jump to a directory using zoxide' },
  { on = '<C-r>', run = 'toggle_all', desc = 'Inverse selection of all files' },
  { on = '<C-x>', run = 'yank --cut', desc = 'Yank selected files (cut)' },
  { on = '<C-z>', run = [ 'plugin blammo', 'plugin storecwd' ], desc = 'Suspend the process' },
  { on = '<Enter>', run = 'open', desc = 'Open selected files' },
  { on = '<Esc>', run = 'escape --find --filter --search', desc = 'Cancel most things' },
  { on = '<PageDown>', run = 'arrow 50%', desc = 'Scroll down by half a page' },
  { on = '<PageUp>', run = 'arrow -50%', desc = 'Scroll up by half a page' },
  { on = '<S-PageDown>', run = 'seek 5', desc = 'Scroll preview down' },
  { on = '<S-PageUp>', run = 'seek -5', desc = 'Scroll preview up' },
  { on = '<Space>', run = 'select_all --state=false', desc = 'Deselect all' },
  { on = '>', run = 'tab_switch 1 --relative', desc = 'Switch to the next tab' },
  { on = '?', run = 'find --previous --smart', desc = 'Find previous file' },
  { on = 'B', run = 'create --force --dir', desc = 'Create a directory' },
  { on = 'D', run = 'remove --permanently --force', desc = 'Delete selected' },
  { on = 'H', run = 'back', desc = 'Go back to the previous directory' },
  { on = 'I', run = 'plugin toggle-pane min-preview', desc = 'Toggle preview' },
  { on = 'L', run = 'forward', desc = 'Go forward to the next directory' },
  { on = 'N', run = 'find_arrow --previous', desc = 'Go to the previous found' },
  { on = 'O', run = 'paste --force', desc = 'Paste yanked files (overwrite if the destination exists)' },
  { on = 'S', run = [ 'plugin blammo', 'shell --confirm --orphan -- footclient' ], desc = 'Launch terminal here' },
  { on = 'T', run = 'close', desc = 'Close the current tab, or quit if it is last tab' },
  { on = 'Y', run = 'search rg', desc = 'Search files by content using ripgrep' },
  { on = '_', run = 'link --force --relative', desc = 'Symlink relatively' },
  { on = 'a', run = 'plugin toggle_select', desc = 'Toggle select mode' },
  { on = 'b', run = 'create --force', desc = 'Create a blob' },
  { on = 'd', run = 'remove --force', desc = 'Trash selected' },
  { on = 'e', run = '''shell --block --confirm 'helix "$@"'''', desc = 'Open in helix' },
  { on = 'f', run = 'plugin jump-to-char', desc = 'Jump to char' },
  { on = 'h', run = 'leave', desc = 'Go back to the parent directory' },
  { on = 'i', run = 'plugin fzf', desc = 'Jump to a directory or reveal a file using fzf' },
  { on = 'j', run = 'arrow 1', desc = 'Move cursor down' },
  { on = 'k', run = 'arrow -1', desc = 'Move cursor up' },
  { on = 'l', run = 'enter', desc = 'Enter the child directory' },
  { on = 'n', run = 'find_arrow', desc = 'Go to the next found' },
  { on = 'o', run = 'paste', desc = 'Paste yanked files' },
  { on = 'r', run = 'rename --cursor=before_ext', desc = 'Rename selected file(s)' },
  { on = 't', run = 'tab_create --current', desc = 'Create a new tab with CWD' },
  { on = 'v', run = 'toggle --state=on', desc = 'Select hovered file' },
  { on = 'w', run = 'plugin toggle_deselect', desc = 'Toggle deselect mode' },
  { on = 'x', run = 'toggle --state=off', desc = 'Deselect current file' },
  { on = 'y', run = 'search fd', desc = 'Search files by name using fd' },
  { on = '“', run = 'tab_swap -1', desc = 'Swap current tab with previous tab' },
  { on = '”', run = 'tab_swap 1', desc = 'Swap current tab with next tab' },
  { on = [ 'c', 'c' ], run = 'plugin compress', desc = 'Archive selected files' },
  { on = [ 'c', 'm' ], run = [ 'plugin blammo', 'shell --block --confirm -- fish -c "ffmpeg_convert_to_mp3 (blammo)"' ], desc = 'Convert to mp3' },
  { on = [ 'c', 'u' ], run = [ 'plugin blammo', 'shell --confirm -- fish -c "ouch d (blammo)"' ], desc = 'Decompress archive with ouch' },
  { on = [ 'c', 'v' ], run = [ 'plugin blammo', 'shell --block --confirm -- fish -c "ffmpeg_convert_video (blammo)"' ], desc = 'Manipulate video' },
  { on = [ 'c', 'w' ], run = [ 'plugin blammo', 'shell --confirm -- fish -c "webify (blammo)"' ], desc = 'Convert to webp, if that ends up smaller' },
  { on = [ 'g', 'h' ], run = 'cd ~', desc = 'Go home' },
  { on = [ 'g', 'i' ], run = 'arrow top', desc = 'Go to top' },
  { on = [ 'g', 'o' ], run = 'arrow bot', desc = 'Go to bottom' },
  { on = [ 'g', 'q' ], run = 'shell -- ya pub dds-cd --str "$(git rev-parse --show-toplevel)" --confirm', desc = 'Go to repo root' },
  { on = [ 's', 'L' ], run = 'copy name_without_ext', desc = 'Copy the filename without extension' },
  { on = [ 's', 'i' ], run = [ 'plugin blammo', 'shell --confirm -- fish -c "copyl (blammo)"' ], desc = 'Copy uri list to clipboard' },
  { on = [ 's', 'j' ], run = 'copy path', desc = 'Copy the file path' },
  { on = [ 's', 'k' ], run = 'copy dirname', desc = 'Copy the directory path' },
  { on = [ 's', 'l' ], run = 'copy filename', desc = 'Copy the filename' },
  { on = [ 'z', 'z' ], run = 'shell --confirm -- zoxide add .', desc = 'Initialize current directory in zoxide' },
  # [[sort off]]
]

[input]
append_keymap = [
  # [[sort on]]
  { on = '%', run = [ 'move -999', 'visual', 'move 999' ], desc = 'Enter visual mode and select all' },
  { on = 'U', run = 'redo', desc = 'Redo the last operation' },
  { on = [ 'g', 'h' ], run = 'move -999', desc = 'Move to the BOL' },
  { on = [ 'g', 'l' ], run = 'move 999', desc = 'Move to the EOL' },
  # [[sort off]]
]

[help]
append_keymap = [ { on = 'K', run = 'close', desc = 'Hide the help' } ]
